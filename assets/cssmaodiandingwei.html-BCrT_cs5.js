import{_ as s,c as a,a as p,o as e}from"./app-Crz_P5Al.js";const t="/assets/%E5%AE%9A%E4%BD%8D-DFz6oofd.png",o="/assets/%E5%AE%9A%E4%BD%8Dg-cUJjgP_E.webp",l={};function i(c,n){return e(),a("div",null,n[0]||(n[0]=[p(`<h3 id="anchor-api" tabindex="-1"><a class="header-anchor" href="#anchor-api"><span>Anchor API</span></a></h3><p><code>CSS Anchor API</code> 提供了一种全新的方式，让元素可以 根据特定的锚点 <code>（Anchor）</code> 进行动态定位，而不必再依赖 JavaScript 或复杂的 CSS 技巧。</p><p>在过去，实现类似的功能通常需要编写大量代码。例如，我们希望某个 工具提示始终跟随按钮，那么就需要手动计算位置、处理滚动问题，还要监听各种事件。</p><p>而 <code>CSS Anchor API</code> 让这一切变得异常简单，只需少量 CSS 代码就能搞定。</p><h3 id="demo" tabindex="-1"><a class="header-anchor" href="#demo"><span>Demo</span></a></h3><p>假设我们在页面上有这么三个元素：按钮A、按钮B、被定位元素C，其中被 元素C 是一个插入到任意地方，且为绝对定位的元素，核心 CSS 代码如下：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn-a&quot;</span><span class="token operator">&gt;</span>按钮<span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn-b&quot;</span><span class="token operator">&gt;</span>按钮<span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;anchor&quot;</span><span class="token operator">&gt;</span>被定位元素<span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token punctuation">.</span>btn<span class="token operator">-</span>a<span class="token punctuation">,</span> <span class="token punctuation">.</span>btn<span class="token operator">-</span>b <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 高宽各类样式</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span>anchor <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，三个元素属于同级关系，且 C 元素是绝对定位，当前基于 body 进行绝对定位。</p><p><img src="`+t+`" alt="alt text"></p><blockquote><p>而锚点定位的属性的核心作用就是，能够改变元素定位的基准，增强元素的绝对定位的能力。Anchor Positioning（锚点定位）允许我们基于其它锚点元素的位置和尺寸去定位上下文，而不是传统意义上的基于父元素去进行绝对定位。</p></blockquote><p>下面，我们利用锚点定位去实现，当两个按钮 A、B 被 Hover 的时候，让定位元素 C 基于当前被 Hover 的按钮元素进行绝对定位，核心 CSS 代码如下：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"></span>
<span class="line"><span class="token punctuation">.</span>btn<span class="token operator">-</span>a <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 将元素声明为定位基准点，命名为 --btn-a</span></span>
<span class="line">    anchor<span class="token operator">-</span>name<span class="token operator">:</span> <span class="token operator">--</span>btn<span class="token operator">-</span>a<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">.</span>btn<span class="token operator">-</span>b <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 将元素声明为定位基准点，命名为 --btn-b</span></span>
<span class="line">    anchor<span class="token operator">-</span>name<span class="token operator">:</span> <span class="token operator">--</span>btn<span class="token operator">-</span>b<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 当元素被 hover 的时候，改变 C 元素的样式</span></span>
<span class="line"><span class="token punctuation">.</span>btn<span class="token operator">-</span>a<span class="token operator">:</span>hover <span class="token operator">~</span> <span class="token punctuation">.</span>anchor <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 锚点绑定，建立元素与锚点的定位关系 </span></span>
<span class="line">    position<span class="token operator">-</span>anchor<span class="token operator">:</span> <span class="token operator">--</span>btn<span class="token operator">-</span>a<span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 基于新的锚点元素，设置元素的 left\\top 属性</span></span>
<span class="line">    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token function">anchor</span><span class="token punctuation">(</span><span class="token operator">--</span>btn<span class="token operator">-</span>a center<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token function">anchor</span><span class="token punctuation">(</span><span class="token operator">--</span>btn<span class="token operator">-</span>a bottom<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 利用 transform 轻微调整定位，非核心代码</span></span>
<span class="line">    <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">,</span> 5px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 同理，与上面做的事情一致，知识在 hover 按钮 B 时，重新设定锚点元素</span></span>
<span class="line"><span class="token punctuation">.</span>btn<span class="token operator">-</span>b<span class="token operator">:</span>hover <span class="token operator">~</span> <span class="token punctuation">.</span>anchor <span class="token punctuation">{</span></span>
<span class="line">    position<span class="token operator">-</span>anchor<span class="token operator">:</span> <span class="token operator">--</span>btn<span class="token operator">-</span>b<span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token function">anchor</span><span class="token punctuation">(</span><span class="token operator">--</span>btn<span class="token operator">-</span>b center<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token function">anchor</span><span class="token punctuation">(</span><span class="token operator">--</span>btn<span class="token operator">-</span>b bottom<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">,</span> 5px<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">.</span>anchor <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 方便动图演示，增加元素过渡动画，非核心代码</span></span>
<span class="line">    <span class="token literal-property property">transition</span><span class="token operator">:</span> all <span class="token punctuation">.</span>2s<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如此一来，我们就实现了动态改变 C 元素定位基准的能力，我们看看效果：</p><p><img src="`+o+`" alt="alt text"></p><h3 id="anchor-positioning-锚点定位核心-api" tabindex="-1"><a class="header-anchor" href="#anchor-positioning-锚点定位核心-api"><span>Anchor Positioning 锚点定位核心 API</span></a></h3><ol><li>anchor-name：锚点定义 <ol><li>功能：将元素声明为定位基准点</li><li>语法：anchor-name: <code>&lt;dashed-ident&gt;</code>;</li><li>应用场景：触发元素、参考元素、动态定位源</li></ol></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">/* 定义触发元素为锚点 */</span></span>
<span class="line"><span class="token punctuation">.</span>trigger<span class="token operator">-</span>btn <span class="token punctuation">{</span></span>
<span class="line">  anchor<span class="token operator">-</span>name<span class="token operator">:</span> <span class="token operator">--</span>menu<span class="token operator">-</span>anchor<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>position-anchor：锚点绑定 <ol><li>功能：建立元素与锚点的定位关系</li><li>语法：position-anchor: <code>&lt;dashed-ident&gt;</code>;</li><li>需配合定位属性（position: fixed/absolute）使用</li></ol></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token punctuation">.</span>tooltip <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">position</span><span class="token operator">:</span> fixed<span class="token punctuation">;</span></span>
<span class="line">  position<span class="token operator">-</span>anchor<span class="token operator">:</span> <span class="token operator">--</span>menu<span class="token operator">-</span>anchor<span class="token punctuation">;</span> <span class="token comment">/* 绑定到指定锚点 */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>anchor()：动态定位 <ol><li>功能：根据锚点位置计算坐标</li><li>语法：<code>anchor(&lt;anchor-name&gt;? &lt;anchor-side&gt;)</code></li><li>方位参数： <ul><li>垂直：top/center/bottom</li><li>水平：left/center/right</li><li>组合：top-left/bottom-right 等</li></ul></li></ol></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token punctuation">.</span>context<span class="token operator">-</span>menu <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* 锚点右下角对齐 */</span></span>
<span class="line">  <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token function">anchor</span><span class="token punctuation">(</span><span class="token operator">--</span>ctx<span class="token operator">-</span>anchor bottom<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token function">anchor</span><span class="token punctuation">(</span><span class="token operator">--</span>ctx<span class="token operator">-</span>anchor right<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">.</span>tooltip <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* 水平居中于锚点 */</span></span>
<span class="line">  <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token function">anchor</span><span class="token punctuation">(</span>center<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token function">anchor</span><span class="token punctuation">(</span>center<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>anchor-size()：尺寸继承 <ol><li>功能：获取锚点元素的尺寸值</li><li>语法：<code>anchor-size(&lt;anchor-name&gt;? &lt;dimension&gt;)</code></li><li>维度参数：width/height/block/inline</li></ol></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token punctuation">.</span>popover <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* 继承锚点宽度 */</span></span>
<span class="line">  <span class="token literal-property property">width</span><span class="token operator">:</span> anchor<span class="token operator">-</span><span class="token function">size</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">/* 最小高度为锚点高度的1.5倍 */</span></span>
<span class="line">  min<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>anchor<span class="token operator">-</span><span class="token function">size</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,24)]))}const u=s(l,[["render",i],["__file","cssmaodiandingwei.html.vue"]]),d=JSON.parse('{"path":"/blogs/Css/2025/cssmaodiandingwei.html","title":"CSS锚点定位, 实现浏览器原生磁吸效果","lang":"en-US","frontmatter":{"title":"CSS锚点定位, 实现浏览器原生磁吸效果","date":"2025/3/20","tags":["CSS锚点定位"],"categories":["CSS"]},"headers":[{"level":3,"title":"Anchor API","slug":"anchor-api","link":"#anchor-api","children":[]},{"level":3,"title":"Demo","slug":"demo","link":"#demo","children":[]},{"level":3,"title":"Anchor Positioning 锚点定位核心 API","slug":"anchor-positioning-锚点定位核心-api","link":"#anchor-positioning-锚点定位核心-api","children":[]}],"git":{"createdTime":1757911599000,"updatedTime":1757911599000,"contributors":[{"name":"D_quieT","email":"1360577536@qq.com","commits":1}]},"filePathRelative":"blogs/Css/2025/css锚点定位.md"}');export{u as comp,d as data};
